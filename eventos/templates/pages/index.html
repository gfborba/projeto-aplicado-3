{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Bem-vindo ao Sistema de Eventos</h1>

    <div class="welcome-content">
        <p>Plataforma para conectar organizadores de eventos e fornecedores de servi√ßos.</p>

        {% if is_fornecedor %}
        <div class="fornecedor-actions">
            <h2>√Årea do Fornecedor</h2>
            <p>Gerencie seus servi√ßos e conecte-se com organizadores de eventos.</p>
            <a href="{% url 'meus_servicos' %}" class="btn btn-primary">Meus Servi√ßos</a>
            <a href="{% url 'configurar_raio_cobertura' %}" class="btn-secondary">‚öôÔ∏è Configurar Raio de Cobertura</a>
            <a href="{% url 'minhas_solicitacoes_fornecedor' %}" class="btn btn-info">üí∞ Minhas Solicita√ß√µes de Or√ßamento</a>
            <h3 class="mt-4">Todos os Eventos Dispon√≠veis</h3>
            {% if eventos %}
            <div class="list-group">
                {% for evento in eventos %}
                <div class="list-group-item">
                    <h5><a href="{% url 'detalhes_evento' evento.id %}">{{ evento.nomeEvento }}</a></h5>
                    <p><strong>Data:</strong> {{ evento.dataEvento|date:"d/m/Y H:i" }}</p>
                    <p><strong>Local:</strong> {{ evento.localEvento }}</p>
                    {% if evento.endereco_completo %}
                    <p><strong>Endere√ßo:</strong> {{ evento.endereco_completo }}</p>
                    {% endif %}
                    {% if evento.previsao_participantes %}
                    <p><strong>Previs√£o de Participantes:</strong> {{ evento.previsao_participantes }} pessoas</p>
                    {% endif %}
                    <p>{{ evento.descricaoEvento }}</p>
                    <p><small>Organizador: {{ evento.idUsuario.user.get_full_name }}</small></p>
                    <a href="{% url 'detalhes_evento' evento.id %}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-eye"></i> Detalhes
                    </a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>N√£o h√° eventos cadastrados no momento.</p>
            {% endif %}
        </div>
        {% endif %}

        {% if is_organizador %}
        <div class="organizador-actions">
            <h2>√Årea do Organizador</h2>
            <p>Encontre fornecedores e organize seus eventos.</p>
            <a href="{% url 'criar_evento' %}" class="btn btn-success">Criar Novo Evento</a>
            <a href="{% url 'todos_servicos' %}" class="btn btn-primary">Ver Todos os Servi√ßos</a>
            <a href="{% url 'minhas_solicitacoes_organizador' %}" class="btn btn-info">üí∞ Minhas Solicita√ß√µes de Or√ßamento</a>

            <h3 class="mt-4">Meus Eventos</h3>
            {% if eventos %}
            <div class="list-group">
                {% for evento in eventos %}
                <div class="list-group-item">
                    <h5><a href="{% url 'detalhes_evento' evento.id %}">{{ evento.nomeEvento }}</a></h5>
                    <p><strong>Data:</strong> {{ evento.dataEvento|date:"d/m/Y H:i" }}</p>
                    <p><strong>Local:</strong> {{ evento.localEvento }}</p>
                    {% if evento.endereco_completo %}
                    <p><strong>Endere√ßo:</strong> {{ evento.endereco_completo }}</p>
                    {% endif %}
                    {% if evento.previsao_participantes %}
                    <p><strong>Previs√£o de Participantes:</strong> {{ evento.previsao_participantes }} pessoas</p>
                    {% endif %}
                    <p>{{ evento.descricaoEvento }}</p>
                    <div class="mt-2">
                        <a href="{% url 'editar_evento' evento.id %}" class="btn btn-sm btn-primary">Editar</a>
                        <a href="{% url 'excluir_evento' evento.id %}" class="btn btn-sm btn-danger">Excluir</a>
                        <a href="{% url 'detalhes_evento' evento.id %}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-eye"></i> Detalhes
                        </a>
                        <a href="{% url 'todos_fornecedores'  %}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-eye"></i> Avaliar Fornecedor
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>Voc√™ ainda n√£o criou nenhum evento.</p>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}